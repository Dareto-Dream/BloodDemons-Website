<!DOCTYPE HTML>

<html>
	<head>
		<title>Blood Demons | Server</title>
		
		<link rel="website icon" type="png" href="Files/Images/favicon.png">
		
		<link rel="stylesheet" href="Files/specialStyles.css">
	</head>
	
	<body>
		<ul>
			<li><a href="index.html">Home</a></li>
			<li><a href="news.html">News</a></li>
			<li><a href="projects.html">Projects</a></li>
			<li><a href="team.html">Staff</a></li>
			<li><a href="status.html">Server</a></li>
			<li><a href="Forums\forum.html">Forum</a></li>
			<li><a href="about.html">About</a></li>
			<li><a href="contact.html">Contact</a></li>
		</ul>

		<h1 align="center">Server Status</h1>
		<br>
		
		<h2>Create+ Minecraft Java Server</h2>
	
		<div class="card">
			<div class="icon">
				<img src="Files/Images/Head.jpg" id="favicon"></div>
				<div class="header">
					<a href="SubWebsites/downloads.html"><div class="image"> <img src="Files/Images/Status.png" alt="DareToDream Logo" /> </div></a>
					<h2>DareToDream.zapto.org</h2>
				</div>
			</div>

			<div class="rest">
			</div>
		</div>

		
		<script src="Files/serverCheck.js"></script>
		<script>
			var url = 'https://api.minetools.eu/ping/daretodream.zapto.org';
			var storedText;
			var serverArray;

			fetch(url)
				.then(function(response) {
			    	response.text().then(function(text) {
    					storedText = text;
    					done();
    				});
  				});
			
			function done() {
				storedText = "[ \n" + storedText + '\n]';
    			serverArray = JSON.parse(storedText);
    			console.table(serverArray[0]);
			
				console.table(serverArray);
				var container = document.querySelector('.rest');
				var html = `
					<img src="${serverArray[0].favicon}" width="64px" height="auto">
					<br>
					<p>
						Server description: ${serverArray[0].description}
					
					<br>
					
						Ping latency: ${Math.round(serverArray[0].latency)}ms

					<br>

						${serverArray[0].players.online}/${serverArray[0].players.max} players online

					<br>
						
						People Online: <p class="players"></p>

					<br>
					<br>

						The server is currently on ${serverArray[0].version.name} vanilla minecraft
					</p>
				`
				container.insertAdjacentHTML('beforeend', html);

				var playerPeople = document.querySelector('.players');

				for(let player of serverArray[0].players.sample) {
					var playerHtml = `
						<p>${player.name}, </p>
					`
					playerPeople.insertAdjacentHTML('beforeend', playerHtml);
				}
			}
		</script>

		<!-- footer start -->

		<div id="footer">
			<a class="buttonFooter" href="https://discord.gg/GtpgNeJTRA">Discord</a> | <a class="buttonFooter" href="rules.html">Guidelines</a>
		</div>
		
	</body>
</html>